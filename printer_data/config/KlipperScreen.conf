# =========================
#  KlipperScreen Menus
# =========================

# --- Top-level: add entries to the main screen ---
[menu __main toolchanger]
type: list
name: Toolchanger Controls

[menu __main calibration]
type: list
name: Calibration

[menu __main utilities]
type: list
name: Utilities


# ================
# Toolchanger
# ================

# Init / status
[menu __main toolchanger init]
type: command
name: Initialize Toolchanger
gcode: |
  TC_INIT
  TC_STATUS

[menu __main toolchanger drop_current]
type: command
name: Drop Off Current Tool
gcode: TC_DROPOFF

# Select tools (adjust if your macros differ)
[menu __main toolchanger t0]
type: command
name: Select T0
gcode: T0

[menu __main toolchanger t1]
type: command
name: Select T1
gcode: T1

# Dock Tuner (works if your macro is DOCK_TUNER TOOL=<n> ...)
[menu __main toolchanger dock_tuner_t0_start]
type: command
name: Dock Tuner T0 • START
gcode: |
  G28
  G90
  G1 Z20 F6000
  DOCK_TUNER TOOL=0 START

[menu __main toolchanger dock_tuner_t0_test]
type: command
name: Dock Tuner T0 • TEST
gcode: DOCK_TUNER TOOL=0 TEST

[menu __main toolchanger dock_tuner_t0_save]
type: command
name: Dock Tuner T0 • SAVE
gcode: DOCK_TUNER TOOL=0 SAVE

[menu __main toolchanger dock_tuner_t1_start]
type: command
name: Dock Tuner T1 • START
gcode: |
  G28
  G90
  G1 Z20 F6000
  DOCK_TUNER TOOL=1 START

[menu __main toolchanger dock_tuner_t1_test]
type: command
name: Dock Tuner T1 • TEST
gcode: DOCK_TUNER TOOL=1 TEST

[menu __main toolchanger dock_tuner_t1_save]
type: command
name: Dock Tuner T1 • SAVE
gcode: DOCK_TUNER TOOL=1 SAVE


# ================
# Calibration
# ================
# NOTE: Resonance/SHAPER items assume ADXL is configured.
# If not, comment these out.

[menu __main calibration resonance_x]
type: command
name: Resonance • X Axis
gcode: |
  RESPOND MSG="Starting X resonance..."
  TEST_RESONANCES AXIS=X

[menu __main calibration resonance_y]
type: command
name: Resonance • Y Axis
gcode: |
  RESPOND MSG="Starting Y resonance..."
  TEST_RESONANCES AXIS=Y

[menu __main calibration save_config]
type: command
name: Save Config (after cal)
gcode: SAVE_CONFIG

[menu __main calibration pid_bed_100]
type: command
name: PID Bed @100 °C
gcode: |
  PID_CALIBRATE HEATER=heater_bed TARGET=100
  SAVE_CONFIG


# ================
# Utilities
# ================

# LEDs (adjust to your LED macro/objects)
[menu __main utilities leds_off]
type: command
name: LEDs Off
gcode: SET_LED LED=light VALUE=0,0,0

# Filament helpers (requires these macros in your cfg)
[menu __main utilities load_filament_t0]
type: command
name: Load Filament (T0)
gcode: |
  T0
  FILAMENT_LOAD

[menu __main utilities unload_filament_t0]
type: command
name: Unload Filament (T0)
gcode: |
  T0
  FILAMENT_UNLOAD

[menu __main utilities load_filament_t1]
type: command
name: Load Filament (T1)
gcode: |
  T1
  FILAMENT_LOAD

[menu __main utilities unload_filament_t1]
type: command
name: Unload Filament (T1)
gcode: |
  T1
  FILAMENT_UNLOAD

# Nevermore / chamber fan toggle (rename FAN= to your object)
[menu __main utilities nevermore_on]
type: command
name: Nevermore On
gcode: SET_FAN_SPEED FAN=nevermore SPEED=1.0

[menu __main utilities nevermore_off]
type: command
name: Nevermore Off
gcode: SET_FAN_SPEED FAN=nevermore SPEED=0

#~# --- Do not edit below this line. This section is auto generated --- #~#
#~#
#~# [main]
#~# print_estimate_method = slicer
#~# screen_blanking = 900
#~# 24htime = False
#~# show_heater_power = True
#~# print_sort_dir = date_desc
#~# 
#~# [graph Printer]
#~# heater_bed = False
#~#
